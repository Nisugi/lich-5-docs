<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Lich::Util::MemoryReleaser::Manager
  
    &mdash; Lich 5 Documentation
  
</title>

  <link rel="stylesheet" href="../../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Lich::Util::MemoryReleaser::Manager";
  relpath = '../../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../../Lich.html" title="Lich (module)">Lich</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../../Util.html" title="Lich::Util (module)">Util</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../MemoryReleaser.html" title="Lich::Util::MemoryReleaser (module)">MemoryReleaser</a></span></span>
     &raquo; 
    <span class="title">Manager</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Lich::Util::MemoryReleaser::Manager
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Lich::Util::MemoryReleaser::Manager</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>documented/util/memoryreleaser.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Manages the memory releaser settings and operations</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
        <h5 class="example_title"><div class='inline'>
<p>Creating a manager instance</p>
</div></h5>
      
      <pre class="example code"><code><span class='id identifier rubyid_manager'>manager</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MemoryReleaser.html" title="Lich::Util::MemoryReleaser (module)">MemoryReleaser</a></span></span><span class='op'>::</span><span class='const'>Manager</span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="Lich::Util::MemoryReleaser::Manager#initialize (method)">new</a></span></span></code></pre>
    
  </div>


</div>



  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#enabled-instance_method" title="#enabled (instance method)">#<strong>enabled</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute enabled.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#interval-instance_method" title="#interval (instance method)">#<strong>interval</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute interval.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#settings-instance_method" title="#settings (instance method)">#<strong>settings</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute settings.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#verbose-instance_method" title="#verbose (instance method)">#<strong>verbose</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute verbose.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_disable!-instance_method" title="#auto_disable! (instance method)">#<strong>auto_disable!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_start!-instance_method" title="#auto_start! (instance method)">#<strong>auto_start!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#benchmark-instance_method" title="#benchmark (instance method)">#<strong>benchmark</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>  &#x21d2; Manager </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes a new Manager instance.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#interval!-instance_method" title="#interval! (instance method)">#<strong>interval!</strong>(seconds)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_settings-instance_method" title="#load_settings (instance method)">#<strong>load_settings</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Loads settings from the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#release-instance_method" title="#release (instance method)">#<strong>release</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#running%3F-instance_method" title="#running? (instance method)">#<strong>running?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_settings-instance_method" title="#save_settings (instance method)">#<strong>save_settings</strong>  &#x21d2; Hash </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Saves current settings to the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">#<strong>start</strong>(interval: nil, verbose: nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">#<strong>status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop-instance_method" title="#stop (instance method)">#<strong>stop</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verbose!-instance_method" title="#verbose! (instance method)">#<strong>verbose!</strong>(enabled)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Lich::Util::MemoryReleaser::Manager (class)">Manager</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initializes a new Manager instance</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span>
  <span class='id identifier rubyid_load_settings'>load_settings</span>
  <span class='ivar'>@enabled</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="enabled=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="enabled-instance_method">
  
    #<strong>enabled</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute enabled.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 106</span>

<span class='kw'>def</span> <span class='id identifier rubyid_enabled'>enabled</span>
  <span class='ivar'>@enabled</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="interval=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="interval-instance_method">
  
    #<strong>interval</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute interval.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interval'>interval</span>
  <span class='ivar'>@interval</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="settings-instance_method">
  
    #<strong>settings</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute settings.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_settings'>settings</span>
  <span class='ivar'>@settings</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="verbose=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="verbose-instance_method">
  
    #<strong>verbose</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute verbose.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


110
111
112</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 110</span>

<span class='kw'>def</span> <span class='id identifier rubyid_verbose'>verbose</span>
  <span class='ivar'>@verbose</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="auto_disable!-instance_method">
  
    #<strong>auto_disable!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


163
164
165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 163</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auto_disable!'>auto_disable!</span>
  <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:auto_start</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_save_settings'>save_settings</span>
  <span class='id identifier rubyid_stop'>stop</span> <span class='kw'>if</span> <span class='id identifier rubyid_running?'><span class='object_link'><a href="../../../top-level-namespace.html#running%3F-instance_method" title="#running? (method)">running?</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="auto_start!-instance_method">
  
    #<strong>auto_start!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 157</span>

<span class='kw'>def</span> <span class='id identifier rubyid_auto_start!'>auto_start!</span>
  <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:auto_start</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id identifier rubyid_save_settings'>save_settings</span>
  <span class='id identifier rubyid_start'>start</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="benchmark-instance_method">
  
    #<strong>benchmark</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 259</span>

<span class='kw'>def</span> <span class='id identifier rubyid_benchmark'>benchmark</span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>60</span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memory Usage Before Release:</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>60</span>
  <span class='id identifier rubyid_before'>before</span> <span class='op'>=</span> <span class='id identifier rubyid_print_memory_stats'>print_memory_stats</span>

  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\nReleasing memory...</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_release'>release</span>

  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>60</span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memory Usage After Release:</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>60</span>
  <span class='id identifier rubyid_after'>after</span> <span class='op'>=</span> <span class='id identifier rubyid_print_memory_stats'>print_memory_stats</span>

  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>60</span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Change:</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>60</span>
  <span class='id identifier rubyid_print_memory_diff'>print_memory_diff</span><span class='lparen'>(</span><span class='id identifier rubyid_before'>before</span><span class='comma'>,</span> <span class='id identifier rubyid_after'>after</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="interval!-instance_method">
  
    #<strong>interval!</strong>(seconds)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172
173
174
175
176
177
178
179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_interval!'>interval!</span><span class='lparen'>(</span><span class='id identifier rubyid_seconds'>seconds</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_seconds'>seconds</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_seconds'>seconds</span><span class='comma'>,</span> <span class='int'>60</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span> <span class='comment'># Minimum 60 seconds
</span>  <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:interval</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_seconds'>seconds</span>
  <span class='ivar'>@interval</span> <span class='op'>=</span> <span class='id identifier rubyid_seconds'>seconds</span>
  <span class='id identifier rubyid_save_settings'>save_settings</span>

  <span class='comment'># If currently running, restart with new interval
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_running?'><span class='object_link'><a href="../../../top-level-namespace.html#running%3F-instance_method" title="#running? (method)">running?</a></span></span>
    <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Restarting with new interval: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_seconds'>seconds</span><span class='embexpr_end'>}</span><span class='tstring_content'>s</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_start'>start</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_seconds'>seconds</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_settings-instance_method">
  
    #<strong>load_settings</strong>  &#x21d2; <tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Loads settings from the database</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The loaded settings</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>StandardError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If there’s an error loading settings</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 124</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_settings'>load_settings</span>
  <span class='comment'># Load from DB_Store with per-character scope
</span>  <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_game'>game</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_stored_settings'>stored_settings</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Common.html" title="Lich::Common (module)">Common</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Common/DB_Store.html" title="Lich::Common::DB_Store (module)">DB_Store</a></span></span><span class='period'>.</span><span class='id identifier rubyid_read'><span class='object_link'><a href="../../Common/DB_Store.html#read-class_method" title="Lich::Common::DB_Store.read (method)">read</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_scope'>scope</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lich_memory_releaser</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@settings</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MemoryReleaser.html#DEFAULT_SETTINGS-constant" title="Lich::Util::MemoryReleaser::DEFAULT_SETTINGS (constant)">DEFAULT_SETTINGS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_stored_settings'>stored_settings</span><span class='rparen'>)</span>

  <span class='comment'># Apply loaded settings to instance variables
</span>  <span class='ivar'>@interval</span> <span class='op'>=</span> <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:interval</span><span class='rbracket'>]</span>
  <span class='ivar'>@verbose</span> <span class='op'>=</span> <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>

  <span class='ivar'>@settings</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'><span class='object_link'><a href="../../../top-level-namespace.html#e-instance_method" title="#e (method)">e</a></span></span>
  <span class='comment'># If there&#39;s an error loading settings, use defaults
</span>  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[MemoryReleaser] Error loading settings: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'><span class='object_link'><a href="../../../top-level-namespace.html#e-instance_method" title="#e (method)">e</a></span></span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_content'>, using defaults</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@settings</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MemoryReleaser.html#DEFAULT_SETTINGS-constant" title="Lich::Util::MemoryReleaser::DEFAULT_SETTINGS (constant)">DEFAULT_SETTINGS</a></span></span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span>
  <span class='ivar'>@interval</span> <span class='op'>=</span> <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:interval</span><span class='rbracket'>]</span>
  <span class='ivar'>@verbose</span> <span class='op'>=</span> <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='ivar'>@settings</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="release-instance_method">
  
    #<strong>release</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


191
192
193
194
195</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 191</span>

<span class='kw'>def</span> <span class='id identifier rubyid_release'>release</span>
  <span class='id identifier rubyid_run_gc'>run_gc</span>
  <span class='id identifier rubyid_release_to_os'>release_to_os</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memory release completed</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="running?-instance_method">
  
    #<strong>running?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243
244
245
246</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 243</span>

<span class='kw'>def</span> <span class='id identifier rubyid_running?'><span class='object_link'><a href="../../../top-level-namespace.html#running%3F-instance_method" title="#running? (method)">running?</a></span></span>
  <span class='id identifier rubyid_worker'>worker</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../MemoryReleaser.html" title="Lich::Util::MemoryReleaser (module)">MemoryReleaser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_worker_thread'><span class='object_link'><a href="../MemoryReleaser.html#worker_thread-class_method" title="Lich::Util::MemoryReleaser.worker_thread (method)">worker_thread</a></span></span>
  <span class='id identifier rubyid_worker'>worker</span><span class='op'>&amp;.</span><span class='id identifier rubyid_alive?'>alive?</span> <span class='op'>||</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_settings-instance_method">
  
    #<strong>save_settings</strong>  &#x21d2; <tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Saves current settings to the database</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The saved settings</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>StandardError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If there’s an error saving settings</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152
153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_settings'>save_settings</span>
  <span class='comment'># Save current settings to DB_Store with per-character scope
</span>  <span class='id identifier rubyid_scope'>scope</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_game'>game</span><span class='embexpr_end'>}</span><span class='tstring_content'>:</span><span class='embexpr_beg'>#{</span><span class='const'>XMLData</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'><span class='object_link'><a href="../../../Lich.html" title="Lich (module)">Lich</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Common.html" title="Lich::Common (module)">Common</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../../Common/DB_Store.html" title="Lich::Common::DB_Store (module)">DB_Store</a></span></span><span class='period'>.</span><span class='id identifier rubyid_save'><span class='object_link'><a href="../../Common/DB_Store.html#save-class_method" title="Lich::Common::DB_Store.save (method)">save</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_scope'>scope</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>lich_memory_releaser</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='ivar'>@settings</span><span class='rparen'>)</span>
  <span class='ivar'>@settings</span>
<span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'><span class='object_link'><a href="../../../top-level-namespace.html#e-instance_method" title="#e (method)">e</a></span></span>
  <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[MemoryReleaser] Error saving settings: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_e'><span class='object_link'><a href="../../../top-level-namespace.html#e-instance_method" title="#e (method)">e</a></span></span><span class='period'>.</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@settings</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="start-instance_method">
  
    #<strong>start</strong>(interval: nil, verbose: nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 197</span>

<span class='kw'>def</span> <span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='label'>interval:</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>verbose:</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stop'>stop</span> <span class='kw'>if</span> <span class='id identifier rubyid_running?'><span class='object_link'><a href="../../../top-level-namespace.html#running%3F-instance_method" title="#running? (method)">running?</a></span></span>

  <span class='comment'># Use provided values or fall back to settings
</span>  <span class='ivar'>@interval</span> <span class='op'>=</span> <span class='id identifier rubyid_interval'>interval</span> <span class='op'>||</span> <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:interval</span><span class='rbracket'>]</span>
  <span class='ivar'>@verbose</span> <span class='op'>=</span> <span class='id identifier rubyid_verbose'>verbose</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>?</span> <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='id identifier rubyid_verbose'>verbose</span>
  <span class='ivar'>@enabled</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='comment'># Update settings with current values
</span>  <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:interval</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@interval</span>
  <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@verbose</span>
  <span class='id identifier rubyid_save_settings'>save_settings</span>

  <span class='comment'># Send command to persistent launcher thread
</span>  <span class='const'><span class='object_link'><a href="../MemoryReleaser.html" title="Lich::Util::MemoryReleaser (module)">MemoryReleaser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_command_queue'><span class='object_link'><a href="../MemoryReleaser.html#command_queue-class_method" title="Lich::Util::MemoryReleaser.command_queue (method)">command_queue</a></span></span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
    <span class='label'>action:</span> <span class='symbol'>:start_worker</span><span class='comma'>,</span>
    <span class='label'>interval:</span> <span class='ivar'>@interval</span><span class='comma'>,</span>
    <span class='label'>verbose:</span> <span class='ivar'>@verbose</span><span class='comma'>,</span>
    <span class='label'>manager:</span> <span class='kw'>self</span>
  <span class='rbrace'>}</span>

  <span class='comment'># Wait for worker to start
</span>  <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>until</span> <span class='id identifier rubyid_running?'><span class='object_link'><a href="../../../top-level-namespace.html#running%3F-instance_method" title="#running? (method)">running?</a></span></span>
    <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.1</span>
    <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>+=</span> <span class='int'>1</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_timeout'>timeout</span> <span class='op'>&gt;</span> <span class='int'>50</span>
      <span class='id identifier rubyid_respond'><span class='object_link'><a href="../../../top-level-namespace.html#respond-instance_method" title="#respond (method)">respond</a></span></span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[MemoryReleaser] ERROR: Worker thread failed to start</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>return</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='const'><span class='object_link'><a href="../MemoryReleaser.html" title="Lich::Util::MemoryReleaser (module)">MemoryReleaser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_worker_thread'><span class='object_link'><a href="../MemoryReleaser.html#worker_thread-class_method" title="Lich::Util::MemoryReleaser.worker_thread (method)">worker_thread</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status-instance_method">
  
    #<strong>status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251
252
253
254
255
256
257</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 248</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span>
  <span class='lbrace'>{</span>
    <span class='label'>running:</span> <span class='id identifier rubyid_running?'><span class='object_link'><a href="../../../top-level-namespace.html#running%3F-instance_method" title="#running? (method)">running?</a></span></span><span class='comma'>,</span>
    <span class='label'>enabled:</span> <span class='ivar'>@enabled</span><span class='comma'>,</span>
    <span class='label'>auto_start:</span> <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:auto_start</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='label'>interval:</span> <span class='ivar'>@interval</span><span class='comma'>,</span>
    <span class='label'>verbose:</span> <span class='ivar'>@verbose</span><span class='comma'>,</span>
    <span class='label'>platform:</span> <span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>host_os</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop-instance_method">
  
    #<strong>stop</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


232
233
234
235
236
237
238
239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 232</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop'>stop</span>
  <span class='ivar'>@enabled</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='const'><span class='object_link'><a href="../MemoryReleaser.html" title="Lich::Util::MemoryReleaser (module)">MemoryReleaser</a></span></span><span class='period'>.</span><span class='id identifier rubyid_command_queue'><span class='object_link'><a href="../MemoryReleaser.html#command_queue-class_method" title="Lich::Util::MemoryReleaser.command_queue (method)">command_queue</a></span></span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span>
    <span class='label'>action:</span> <span class='symbol'>:stop_worker</span>
  <span class='rbrace'>}</span>

  <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.2</span>
  <span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memory releaser stopped</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="verbose!-instance_method">
  
    #<strong>verbose!</strong>(enabled)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'documented/util/memoryreleaser.rb', line 184</span>

<span class='kw'>def</span> <span class='id identifier rubyid_verbose!'>verbose!</span><span class='lparen'>(</span><span class='id identifier rubyid_enabled'>enabled</span><span class='rparen'>)</span>
  <span class='ivar'>@settings</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_enabled'>enabled</span>
  <span class='ivar'>@verbose</span> <span class='op'>=</span> <span class='id identifier rubyid_enabled'>enabled</span>
  <span class='id identifier rubyid_save_settings'>save_settings</span>
  <span class='id identifier rubyid_enabled'>enabled</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jan 13 03:40:20 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.2.9).
</div>

    </div>
  </body>
</html>