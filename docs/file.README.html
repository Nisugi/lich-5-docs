<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Lich 5 Documentation
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Lich+5+Documentation+Generator">Lich 5 Documentation Generator</h1>

<p>Automated YARD documentation generation for the <a href="https://github.com/elanthia-online/lich-5">Lich 5</a> Ruby scripting engine using AI (OpenAI, Anthropic, or Gemini).</p>

<p><strong>ğŸ“– Documentation Website[https://nisugi.github.io/lich-5-docs/]</strong></p>

<h2 id="label-Overview">Overview</h2>

<p>This project uses AI to automatically generate comprehensive YARD documentation for the Lich 5 Ruby codebase. The system processes 120 Ruby files, adding professional documentation comments that enable:</p>
<ul><li>
<p>âœ… <strong>120/120 files</strong> with complete YARD documentation</p>
</li><li>
<p>ğŸ“š <strong>1,805 methods</strong> documented with parameters, return types, and examples</p>
</li><li>
<p>ğŸ”— <strong>Cross-references</strong> between classes and modules</p>
</li><li>
<p>ğŸŒ <strong>Searchable HTML website</strong> hosted on GitHub Pages</p>
</li><li>
<p>âš¡ <strong>Incremental builds</strong> that only reprocess changed files</p>
</li></ul>

<h2 id="label-Features">Features</h2>

<h3 id="label-F0-9F-A4-96+AI-Powered+Documentation">ğŸ¤– AI-Powered Documentation</h3>
<ul><li>
<p>Supports <strong>OpenAI GPT-4</strong>, <strong>Anthropic Claude</strong>, and <strong>Google Gemini</strong></p>
</li><li>
<p>Generates YARD-compliant comments with <code>@param</code>, <code>@return</code>, <code>@example</code> tags</p>
</li><li>
<p>Preserves existing documentation (never overwrites manual edits)</p>
</li></ul>

<h3 id="label-E2-9A-A1+Intelligent+Incremental+Builds">âš¡ Intelligent Incremental Builds</h3>
<ul><li>
<p><strong>SHA256 hash tracking</strong> detects changed files</p>
</li><li>
<p>Only reprocesses files that have been modified</p>
</li><li>
<p>Saves time and API costs (~$0.50 â†’ $0.00 for unchanged codebases)</p>
</li></ul>

<h3 id="label-F0-9F-93-8B+Modular+3-Stage+Workflow">ğŸ“‹ Modular 3-Stage Workflow</h3>

<pre class="code ruby"><code class="ruby"><span class='const'>Generate</span> <span class='id identifier rubyid_â†’'>â†’</span> <span class='const'>Validate</span> <span class='id identifier rubyid_â†’'>â†’</span> <span class='const'>Build</span> <span class='const'>HTML</span>
</code></pre>

<p>Each stage is manually triggered, giving full control over the documentation process.</p>

<h3 id="label-F0-9F-8E-AF+100-25+Validation+Success">ğŸ¯ 100% Validation Success</h3>
<ul><li>
<p>All generated documentation passes YARD validation</p>
</li><li>
<p>Automatically fixes common issues (parameter syntax, duplicate tags)</p>
</li><li>
<p>Clean, professional output ready for publication</p>
</li></ul>

<h2 id="label-Quick+Start">Quick Start</h2>

<h3 id="label-Prerequisites">Prerequisites</h3>
<ul><li>
<p>Python 3.11+</p>
</li><li>
<p>Ruby 3.0+ with YARD gem</p>
</li><li>
<p>API key for OpenAI, Anthropic, or Gemini</p>
</li></ul>

<h3 id="label-Setup">Setup</h3>
<ol><li>
<p><strong>Clone the repository</strong>  <code>bash    git clone https://github.com/Nisugi/lich-5-docs.git    cd lich-5-docs </code></p>
</li><li>
<p><strong>Install Python dependencies</strong>  <code>bash    pip install -r requirements.txt </code></p>
</li><li>
<p><strong>Install YARD</strong>  <code>bash    gem install yard </code></p>
</li><li>
<p><strong>Configure API key</strong>  <code>bash    cp .env.example .env    # Edit .env and add your API key </code></p>
</li></ol>

<h3 id="label-Usage">Usage</h3>

<h4 id="label-Generate+Documentation">Generate Documentation</h4>

<pre class="code ruby"><code class="ruby"># Incremental build (skip unchanged files)
python generate_docs.py /path/to/lich-5/lib \
  --provider openai \
  --output-structure mirror

# Full rebuild (reprocess all files)
python generate_docs.py /path/to/lich-5/lib \
  --provider openai \
  --output-structure mirror \
  --force-rebuild

# Single file (for testing)
python generate_docs.py \
  --file /path/to/lich-5/lib/gemstone/psms/feat.rb \
  --provider openai \
  --output-structure mirror
</code></pre>

<h4 id="label-Validate+Documentation">Validate Documentation</h4>

<pre class="code ruby"><code class="ruby"># Validate all files
python validate_docs.py --dir documented

# Validate single file
python validate_docs.py --file documented/global_defs.rb
</code></pre>

<h4 id="label-Build+HTML+Documentation">Build HTML Documentation</h4>

<pre class="code ruby"><code class="ruby"># Generate HTML website
python build_html.py --input ./documented --output ./docs --clean
</code></pre>

<h2 id="label-GitHub+Actions+Workflows">GitHub Actions Workflows</h2>

<p>The project includes 4 GitHub Actions workflows for automated documentation:</p>

<h3 id="label-1.+Generate+Batch+Documentation">1. Generate Batch Documentation</h3>

<p><strong>Path:</strong> <code>.github/workflows/generate-batch.yml</code></p>

<p>Generates documentation for all Ruby files from the lich-5 repository.</p>

<p><strong>Inputs:</strong> - <code>provider</code>: LLM provider (openai, anthropic, gemini) - <code>source_repo</code>: Source repository (default: <code>elanthia-online/lich-5</code>) - <code>source_branch</code>: Branch to document (default: <code>main</code>) - <code>full_rebuild</code>: Force reprocess all files (default: <code>false</code>)</p>

<h3 id="label-2.+Generate+Single+File">2. Generate Single File</h3>

<p><strong>Path:</strong> <code>.github/workflows/generate-single.yml</code></p>

<p>Fast iteration on a single file for testing and debugging.</p>

<h3 id="label-3.+Validate+Documentation">3. Validate Documentation</h3>

<p><strong>Path:</strong> <code>.github/workflows/validate-docs.yml</code></p>

<p>Validates all documented files using YARD.</p>

<h3 id="label-4.+Build+HTML">4. Build HTML</h3>

<p><strong>Path:</strong> <code>.github/workflows/build-html.yml</code></p>

<p>Generates the static HTML documentation website.</p>

<p><strong>Inputs:</strong> - <code>title</code>: Documentation title (default: â€œLich 5 Documentationâ€) - <code>clean</code>: Clean output directory before building (default: <code>true</code>)</p>

<h2 id="label-Project+Structure">Project Structure</h2>

<pre class="code ruby"><code class="ruby">lich-5-docs/
â”œâ”€â”€ documented/              # YARD-documented Ruby files (mirrors lich-5/lib structure)
â”‚   â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ gemstone/
â”‚   â”œâ”€â”€ attributes/
â”‚   â””â”€â”€ ...
â”œâ”€â”€ docs/                    # Generated HTML documentation (GitHub Pages)
â”œâ”€â”€ output/latest/           # Build artifacts
â”‚   â””â”€â”€ manifest.json        # Incremental build tracking
â”œâ”€â”€ src/providers/           # LLM provider implementations
â”‚   â”œâ”€â”€ openai_provider.py
â”‚   â”œâ”€â”€ anthropic_provider.py
â”‚   â””â”€â”€ gemini.py
â”œâ”€â”€ generate_docs.py         # Main documentation generator
â”œâ”€â”€ validate_docs.py         # YARD validation wrapper
â””â”€â”€ build_html.py            # HTML documentation builder
</code></pre>

<h2 id="label-How+It+Works">How It Works</h2>

<h3 id="label-1.+Generation">1. Generation</h3>
<ul><li>
<p>Clones the lich-5 repository</p>
</li><li>
<p>Processes each Ruby file with AI to generate YARD comments</p>
</li><li>
<p>Returns structured JSON: <code>[{line_number, anchor, indent, comment}, ...]</code></p>
</li><li>
<p>Inserts comments at the correct positions in the source code</p>
</li><li>
<p>Commits documented files to the <code>documented/</code> directory</p>
</li></ul>

<h3 id="label-2.+Incremental+Builds">2. Incremental Builds</h3>
<ul><li>
<p>Calculates SHA256 hash of each file (code only, excluding comments)</p>
</li><li>
<p>Compares with hashes in <code>manifest.json</code></p>
</li><li>
<p>Skips files that havenâ€™t changed</p>
</li><li>
<p>Only reprocesses modified files</p>
</li></ul>

<h3 id="label-3.+Validation">3. Validation</h3>
<ul><li>
<p>Runs <code>yard stats --list-undoc</code> on all documented files</p>
</li><li>
<p>Parses warnings and errors</p>
</li><li>
<p>Reports validation success rate</p>
</li></ul>

<h3 id="label-4.+HTML+Generation">4. HTML Generation</h3>
<ul><li>
<p>Runs <code>yard doc</code> to generate static HTML website</p>
</li><li>
<p>Verifies output (checks for index.html, counts documented items)</p>
</li><li>
<p>Commits to <code>docs/</code> directory</p>
</li><li>
<p>GitHub Pages automatically deploys the website</p>
</li></ul>

<h2 id="label-Configuration">Configuration</h2>

<h3 id="label-Environment+Variables">Environment Variables</h3>

<pre class="code ruby"><code class="ruby"># LLM Provider (openai, anthropic, gemini)
LLM_PROVIDER=openai

# API Keys (only one required based on provider)
OPENAI_API_KEY=sk-...
ANTHROPIC_API_KEY=sk-ant-...
GEMINI_API_KEY=...
</code></pre>

<h3 id="label-Provider+Options">Provider Options</h3>

<p>The system supports three LLM providers:</p>
<ul><li>
<p><strong>OpenAI</strong>: Uses <code>gpt-4o-mini</code> model (paid, see <a href="https://openai.com/api/pricing/">OpenAI pricing</a>)</p>
</li><li>
<p><strong>Anthropic</strong>: Uses <code>claude-3-haiku-20240307</code> model (paid, see <a href="https://www.anthropic.com/pricing">Anthropic pricing</a>)</p>
</li><li>
<p><strong>Gemini</strong>: Uses <code>gemini-2.0-flash-exp</code> model (free tier available, see <a href="https://ai.google.dev/pricing">Google AI pricing</a>)</p>
</li></ul>

<p>For current pricing and rate limits, consult the providerâ€™s official documentation.</p>

<h2 id="label-Development">Development</h2>

<h3 id="label-Running+Tests">Running Tests</h3>

<pre class="code ruby"><code class="ruby">pytest tests/
</code></pre>

<h3 id="label-Testing+Without+API+Costs">Testing Without API Costs</h3>

<pre class="code ruby"><code class="ruby"># Use mock provider (no API calls)
python generate_docs.py /path/to/source --provider mock
</code></pre>

<h3 id="label-Checking+Provider+Status">Checking Provider Status</h3>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_from'>from</span> <span class='id identifier rubyid_providers'>providers</span> <span class='id identifier rubyid_import'>import</span> <span class='const'>ProviderFactory</span>

<span class='id identifier rubyid_validation'>validation</span> <span class='op'>=</span> <span class='const'>ProviderFactory</span><span class='period'>.</span><span class='id identifier rubyid_validate_environment'>validate_environment</span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='id identifier rubyid_print'>print</span><span class='lparen'>(</span><span class='id identifier rubyid_validation'>validation</span><span class='rparen'>)</span>  <span class='comment'># Shows provider, API key status, warnings
</span></code></pre>

<h2 id="label-Documentation">Documentation</h2>
<ul><li>
<p><strong>CLAUDE.md[CLAUDE.md]</strong> - Detailed technical documentation for developers</p>
</li><li>
<p><strong>env.env.example[.env.example]</strong> - Environment variable template</p>
</li><li>
<p><strong>Documentation[https://nisugi.github.io/lich-5-docs/]</strong> - Live documentation website</p>
</li></ul>

<h2 id="label-Contributing">Contributing</h2>
<ol><li>
<p>Fork the repository</p>
</li><li>
<p>Create a feature branch (<code>git checkout -b feature/amazing-feature</code>)</p>
</li><li>
<p>Commit your changes (<code>git commit -m &#39;Add amazing feature&#39;</code>)</p>
</li><li>
<p>Push to the branch (<code>git push origin feature/amazing-feature</code>)</p>
</li><li>
<p>Open a Pull Request</p>
</li></ol>

<h2 id="label-License">License</h2>

<p>This project is independent of the Lich 5 project and is used for documentation purposes.</p>

<h2 id="label-Acknowledgments">Acknowledgments</h2>
<ul><li>
<p><strong>Lich 5</strong> - <a href="https://github.com/elanthia-online/lich-5">elanthia-online/lich-5</a></p>
</li><li>
<p><strong>YARD</strong> - Ruby documentation tool</p>
</li><li>
<p><strong>OpenAI, Anthropic, Google</strong> - AI providers for documentation generation</p>
</li></ul>
<hr>

<p><strong>Built with â¤ï¸ using AI-powered documentation generation</strong></p>
</div></div>

      <div id="footer">
  Generated on Tue Jan 13 02:35:01 2026 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.38 (ruby-3.2.9).
</div>

    </div>
  </body>
</html>