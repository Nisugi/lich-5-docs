<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ExecScript
  
    &mdash; Lich-5 Documentation
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ExecScript";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (E)</a> &raquo;
    
    
    <span class="title">ExecScript</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ExecScript
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></li>
          
            <li class="next">ExecScript</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>script.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>This class represents an executable script in the Lich5 environment.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="name_exec_mutex-classvariable" class="">@@name_exec_mutex =
          
        </dt>
        <dd><pre class="code"><span class='const'>Mutex</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#cmd_data-instance_method" title="#cmd_data (instance method)">#<strong>cmd_data</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute cmd_data.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-class_method" title="start (class method)">.<strong>start</strong>(cmd_data, options = {})  &#x21d2; ExecScript, false </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Starts a new ExecScript with the given command data and options.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_next_label-instance_method" title="#get_next_label (instance method)">#<strong>get_next_label</strong>  &#x21d2; nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Retrieves the next label in the script.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(cmd_data, flags = Hash.new)  &#x21d2; void </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initializes a new ExecScript instance.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Script.html#at_exit-class_method" title="Script.at_exit (method)">at_exit</a></span>, <span class='object_link'><a href="Script.html#at_exit-instance_method" title="Script#at_exit (method)">#at_exit</a></span>, <span class='object_link'><a href="Script.html#clear-instance_method" title="Script#clear (method)">#clear</a></span>, <span class='object_link'><a href="Script.html#clear_exit_procs-class_method" title="Script.clear_exit_procs (method)">clear_exit_procs</a></span>, <span class='object_link'><a href="Script.html#clear_exit_procs-instance_method" title="Script#clear_exit_procs (method)">#clear_exit_procs</a></span>, <span class='object_link'><a href="Script.html#custom%3F-instance_method" title="Script#custom? (method)">#custom?</a></span>, <span class='object_link'><a href="Script.html#db-class_method" title="Script.db (method)">db</a></span>, <span class='object_link'><a href="Script.html#distrust-class_method" title="Script.distrust (method)">distrust</a></span>, <span class='object_link'><a href="Script.html#exit-instance_method" title="Script#exit (method)">#exit</a></span>, <span class='object_link'><a href="Script.html#exit!-class_method" title="Script.exit! (method)">exit!</a></span>, <span class='object_link'><a href="Script.html#exit!-instance_method" title="Script#exit! (method)">#exit!</a></span>, <span class='object_link'><a href="Script.html#feedme_upstream-instance_method" title="Script#feedme_upstream (method)">#feedme_upstream</a></span>, <span class='object_link'><a href="Script.html#gets-instance_method" title="Script#gets (method)">#gets</a></span>, <span class='object_link'><a href="Script.html#gets%3F-instance_method" title="Script#gets? (method)">#gets?</a></span>, <span class='object_link'><a href="Script.html#has_thread%3F-instance_method" title="Script#has_thread? (method)">#has_thread?</a></span>, <span class='object_link'><a href="Script.html#hidden-class_method" title="Script.hidden (method)">hidden</a></span>, <span class='object_link'><a href="Script.html#index-class_method" title="Script.index (method)">index</a></span>, <span class='object_link'><a href="Script.html#instance_eval-instance_method" title="Script#instance_eval (method)">#instance_eval</a></span>, <span class='object_link'><a href="Script.html#instance_variable_get-instance_method" title="Script#instance_variable_get (method)">#instance_variable_get</a></span>, <span class='object_link'><a href="Script.html#kill-instance_method" title="Script#kill (method)">#kill</a></span>, <span class='object_link'><a href="Script.html#labels-instance_method" title="Script#labels (method)">#labels</a></span>, <span class='object_link'><a href="Script.html#list_trusted-class_method" title="Script.list_trusted (method)">list_trusted</a></span>, <span class='object_link'><a href="Script.html#log-class_method" title="Script.log (method)">log</a></span>, <span class='object_link'><a href="Script.html#match_stack_add-instance_method" title="Script#match_stack_add (method)">#match_stack_add</a></span>, <span class='object_link'><a href="Script.html#match_stack_clear-instance_method" title="Script#match_stack_clear (method)">#match_stack_clear</a></span>, <span class='object_link'><a href="Script.html#namescript_incoming-class_method" title="Script.namescript_incoming (method)">namescript_incoming</a></span>, <span class='object_link'><a href="Script.html#new_downstream-class_method" title="Script.new_downstream (method)">new_downstream</a></span>, <span class='object_link'><a href="Script.html#new_downstream_xml-class_method" title="Script.new_downstream_xml (method)">new_downstream_xml</a></span>, <span class='object_link'><a href="Script.html#new_script_output-class_method" title="Script.new_script_output (method)">new_script_output</a></span>, <span class='object_link'><a href="Script.html#new_upstream-class_method" title="Script.new_upstream (method)">new_upstream</a></span>, <span class='object_link'><a href="Script.html#open_file-class_method" title="Script.open_file (method)">open_file</a></span>, <span class='object_link'><a href="Script.html#pause-instance_method" title="Script#pause (method)">#pause</a></span>, <span class='object_link'><a href="Script.html#paused%3F-instance_method" title="Script#paused? (method)">#paused?</a></span>, <span class='object_link'><a href="Script.html#running-class_method" title="Script.running (method)">running</a></span>, <span class='object_link'><a href="Script.html#safe%3F-instance_method" title="Script#safe? (method)">#safe?</a></span>, <span class='object_link'><a href="Script.html#self-class_method" title="Script.self (method)">self</a></span>, <span class='object_link'><a href="Script.html#thread_group-instance_method" title="Script#thread_group (method)">#thread_group</a></span>, <span class='object_link'><a href="Script.html#to_s-instance_method" title="Script#to_s (method)">#to_s</a></span>, <span class='object_link'><a href="Script.html#trust-class_method" title="Script.trust (method)">trust</a></span>, <span class='object_link'><a href="Script.html#unique_gets-instance_method" title="Script#unique_gets (method)">#unique_gets</a></span>, <span class='object_link'><a href="Script.html#unique_gets%3F-instance_method" title="Script#unique_gets? (method)">#unique_gets?</a></span>, <span class='object_link'><a href="Script.html#unpause-instance_method" title="Script#unpause (method)">#unpause</a></span>, <span class='object_link'><a href="Script.html#upstream_gets-instance_method" title="Script#upstream_gets (method)">#upstream_gets</a></span>, <span class='object_link'><a href="Script.html#upstream_gets%3F-instance_method" title="Script#upstream_gets? (method)">#upstream_gets?</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(cmd_data, flags = Hash.new)  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Ensure proper use of variables and initialization of the parent class.</p>
</div>
  </div>

<p>Initializes a new ExecScript instance.</p>

<p>rubocop:disable Lint/MissingSuper</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cmd_data</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the command data to execute.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>flags</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>Hash.new</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>options for the script execution.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1281
1282
1283
1284
1285
1286
1287
1288
1289
1290
1291
1292
1293
1294
1295
1296
1297
1298
1299
1300
1301
1302
1303
1304
1305
1306
1307
1308
1309
1310
1311
1312
1313
1314
1315
1316
1317
1318
1319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'script.rb', line 1281</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd_data'>cmd_data</span><span class='comma'>,</span> <span class='id identifier rubyid_flags'>flags</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
  <span class='ivar'>@cmd_data</span> <span class='op'>=</span> <span class='id identifier rubyid_cmd_data'>cmd_data</span>
  <span class='ivar'>@custom</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@vars</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@downstream_buffer</span> <span class='op'>=</span> <span class='const'>LimitedArray</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@downstream_buffer</span><span class='period'>.</span><span class='id identifier rubyid_max_size'>max_size</span> <span class='op'>=</span> <span class='int'>400</span>
  <span class='ivar'>@killer_mutex</span> <span class='op'>=</span> <span class='const'>Mutex</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@want_downstream</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@want_downstream_xml</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@upstream_buffer</span> <span class='op'>=</span> <span class='const'>LimitedArray</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@want_upstream</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@at_exit_procs</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@watchfor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@hidden</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@paused</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@silent</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_flags'>flags</span><span class='lbracket'>[</span><span class='symbol'>:quiet</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='ivar'>@quiet</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>else</span>
    <span class='ivar'>@quiet</span> <span class='op'>=</span> <span class='id identifier rubyid_flags'>flags</span><span class='lbracket'>[</span><span class='symbol'>:quiet</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='ivar'>@safe</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@no_echo</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@thread_group</span> <span class='op'>=</span> <span class='const'>ThreadGroup</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@unique_buffer</span> <span class='op'>=</span> <span class='const'>LimitedArray</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@die_with</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@no_pause_all</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@no_kill_all</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@match_stack_labels</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@match_stack_strings</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_flags'>flags</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
    <span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_succ!'>succ!</span> <span class='kw'>while</span> <span class='cvar'>@@running</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exec</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_num'>num</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>exec</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_num'>num</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_num'>num</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>1</span><span class='tstring_end'>&#39;</span></span><span class='semicolon'>;</span> <span class='id identifier rubyid_num'>num</span><span class='period'>.</span><span class='id identifier rubyid_succ!'>succ!</span> <span class='kw'>while</span> <span class='cvar'>@@running</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_s'>s</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_flags'>flags</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_num'>num</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='ivar'>@name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_flags'>flags</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_num'>num</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='cvar'>@@running</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="cmd_data-instance_method">
  
    #<strong>cmd_data</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute cmd_data.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1194
1195
1196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'script.rb', line 1194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cmd_data'>cmd_data</span>
  <span class='ivar'>@cmd_data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="start-class_method">
  
    .<strong>start</strong>(cmd_data, options = {})  &#x21d2; <tt><span class='object_link'><a href="" title="ExecScript (class)">ExecScript</a></span></tt>, <tt>false</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Starts a new ExecScript with the given command data and options.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h4 class="tag_title">Examples:</h4>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_script'>script</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="ExecScript (class)">ExecScript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>puts &#39;Hello, World!&#39;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>quiet:</span> <span class='kw'>false</span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>cmd_data</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the command data to execute.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Hash.html" title="Hash (class)">Hash</a></span></tt>, <tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>options for the script execution.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="ExecScript (class)">ExecScript</a></span></tt>, <tt>false</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the new ExecScript instance or false if it failed to start.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>StandardError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if there is an error during execution.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1204
1205
1206
1207
1208
1209
1210
1211
1212
1213
1214
1215
1216
1217
1218
1219
1220
1221
1222
1223
1224
1225
1226
1227
1228
1229
1230
1231
1232
1233
1234
1235
1236
1237
1238
1239
1240
1241
1242
1243
1244
1245
1246
1247
1248
1249
1250
1251
1252
1253
1254
1255
1256
1257
1258
1259
1260
1261
1262
1263
1264
1265
1266
1267
1268
1269
1270
1271</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'script.rb', line 1204</span>

<span class='kw'>def</span> <span class='const'><span class='object_link'><a href="" title="ExecScript (class)">ExecScript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_start'>start</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd_data'>cmd_data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:quiet</span> <span class='op'>=&gt;</span> <span class='kw'>true</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span> <span class='op'>==</span> <span class='kw'>true</span>
  <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id identifier rubyid_new_script'>new_script</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="" title="ExecScript (class)">ExecScript</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="#initialize-instance_method" title="ExecScript#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_cmd_data'>cmd_data</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>--- Lich: failed to start exec script</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_new_thread'>new_thread</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span>
    <span class='int'>100</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='kw'>break</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span> <span class='op'>==</span> <span class='id identifier rubyid_new_script'>new_script</span><span class='semicolon'>;</span> <span class='id identifier rubyid_sleep'>sleep</span> <span class='float'>0.01</span> <span class='rbrace'>}</span>

    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_script'>script</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='rparen'>)</span>
      <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_priority'>priority</span> <span class='op'>=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- Lich: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='embexpr_end'>}</span><span class='tstring_content'> active.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_quiet'>quiet</span>
      <span class='kw'>begin</span>
        <span class='id identifier rubyid_script_binding'>script_binding</span> <span class='op'>=</span> <span class='const'>TRUSTED_SCRIPT_BINDING</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span>
        <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>script = Script.current</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_script_binding'>script_binding</span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_eval'>eval</span><span class='lparen'>(</span><span class='id identifier rubyid_cmd_data'>cmd_data</span><span class='comma'>,</span> <span class='id identifier rubyid_script_binding'>script_binding</span><span class='comma'>,</span> <span class='id identifier rubyid_script'>script</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rparen'>)</span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>SystemExit</span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>SyntaxError</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- SyntaxError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SyntaxError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>ScriptError</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- ScriptError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ScriptError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>NoMemoryError</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- NoMemoryError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NoMemoryError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>LoadError</span>
        <span class='id identifier rubyid_respond'>respond</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- LoadError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- LoadError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LoadError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>SecurityError</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- SecurityError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SecurityError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>ThreadError</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- ThreadError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ThreadError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>SystemStackError</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- SystemStackError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SystemStackError: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>rescue</span> <span class='const'>StandardError</span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>--- Lich error: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='id identifier rubyid_respond'>respond</span> <span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
        <span class='const'><span class='object_link'><a href="Lich.html" title="Lich (module)">Lich</a></span></span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Exception: </span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n\t</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='period'>.</span><span class='id identifier rubyid_backtrace'>backtrace</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='const'><span class='object_link'><a href="Script.html" title="Script (class)">Script</a></span></span><span class='period'>.</span><span class='id identifier rubyid_current'>current</span><span class='period'>.</span><span class='id identifier rubyid_kill'>kill</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_respond'>respond</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>start_exec_script screwed up...</span><span class='tstring_end'>&#39;</span></span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_new_script'>new_script</span><span class='period'>.</span><span class='id identifier rubyid_thread_group'>thread_group</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_new_thread'>new_thread</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new_script'>new_script</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get_next_label-instance_method">
  
    #<strong>get_next_label</strong>  &#x21d2; <tt>nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>This method is not implemented for ExecScript.</p>
</div>
  </div>

<p>Retrieves the next label in the script.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>always returns nil as goto labels are not available in exec scripts.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1326
1327
1328
1329</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'script.rb', line 1326</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_next_label'>get_next_label</span>
  <span class='id identifier rubyid_echo'>echo</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>goto labels are not available in exec scripts.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Nov  7 00:10:57 2025 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.37 (ruby-3.1.7).
</div>

    </div>
  </body>
</html>